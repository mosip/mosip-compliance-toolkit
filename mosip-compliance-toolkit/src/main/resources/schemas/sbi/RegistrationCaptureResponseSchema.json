{
	"$schema": "https://json-schema.org/draft/2019-09/schema#",
	"$id": "http://mosip-compliance-toolkit.com/schemas/RegistrationCaptureResponseSchema.json",
	"title": "Registration Capture Response Schema",
	"description": "Registration Capture Response Schema",
	"type": "object",
	"additionalProperties": false,	
	"properties": {
		"biometrics": {
			"type": "array",
			"items": [
				{
					"type": "object",
					"properties": {
						"specVersion": {
							"type": "string"
						},
						"data": {
							"$ref": "#/definitions/non-empty-string"
						},
						"dataDecoded": {
							"type": "object",
							"properties": {
								"digitalId": {
									"$ref": "#/definitions/non-empty-string"
								},
								"digitalIdDecoded": {
									"$schema": "https://json-schema.org/draft/2019-09/schema#",
									"$id": "http://mosip-compliance-toolkit.com/schemas/DigitalIdResponseSchema.json",
									"type": "object",
									"title": "DigitalId Response Schema",
									"description": "DigitalId Response Schema",
									"additionalProperties": false,
									"properties": {
										"serialNo": {
											"$ref": "#/definitions/non-empty-string"
										},
										"make": {
											"$ref": "#/definitions/non-empty-string"
										},
										"model": {
											"$ref": "#/definitions/non-empty-string"
										},
										"type": {
											"type": "string",
											"enum": [
												"Finger",
												"Iris",
												"Face"
											]
										},
										"deviceSubType": {
											"type": "string",
											"enum": [
												"Slap",
												"Single",
												"Touchless",
												"Double",
												"Full face"
											]
										},
										"deviceProvider": {
											"$ref": "#/definitions/non-empty-string"
										},
										"deviceProviderId": {
											"$ref": "#/definitions/non-empty-string"
										},
										"dateTime": {
											"type": "string",
											"format": "date-time",
											"description": "We expect YYYY-MM-ddTHH:mm:SSZ"
										}
									},
									"allOf": [
										{
											"if": {
												"properties": {
													"type": {
														"const": "Finger"
													}
												}
											},
											"then": {
												"properties": {
													"deviceSubType": {
														"type": "string",
														"enum": [
															"Single",
															"Slap",
															"Touchless"
														]
													}
												}
											}
										},
										{
											"if": {
												"properties": {
													"type": {
														"const": "Iris"
													}
												}
											},
											"then": {
												"properties": {
													"deviceSubType": {
														"type": "string",
														"enum": [
															"Single",
															"Double"
														]
													}
												}
											}
										},
										{
											"if": {
												"properties": {
													"type": {
														"const": "Face"
													}
												}
											},
											"then": {
												"properties": {
													"deviceSubType": {
														"type": "string",
														"enum": [
															"Full face"
														]
													}
												}
											}
										}
									],
									"required": [
										"serialNo",
										"make",
										"type",
										"model",
										"deviceSubType",
										"deviceProviderId",
										"deviceProvider",
										"dateTime"
									],
									"definitions": {
										"non-empty-string": {
											"type": "string",
											"minLength": 1
										}
									}
								},
								"deviceCode": {
									"$ref": "#/definitions/non-empty-string"
								},
								"deviceServiceVersion": {
									"$ref": "#/definitions/non-empty-string"
								},
								"bioType": {
									"type": "string",
									"enum": [
										"Finger",
										"Iris",
										"Face"
									]
								},
								"bioSubType": {
									"type": "string",
									"enum": [
										"Left IndexFinger",
										"Left MiddleFinger",
										"Left RingFinger",
										"Left LittleFinger",
										"Left Thumb",
										"Right IndexFinger",
										"Right MiddleFinger",
										"Right RingFinger",
										"Right LittleFinger",
										"Right Thumb",
										"UNKNOWN",
										"Left",
										"Right",
										null
									]
								},
								"purpose": {
									"type": "string",
									"enum": [
										"Auth",
										"Registration"
									]
								},
								"env": {
									"type": "string",
									"enum": [
										"Staging",
										"Developer",
										"Pre-Production",
										"Production"
									]
								},
								"bioValue": {
									"$ref": "#/definitions/non-empty-string"
								},
								"transactionId": {
									"$ref": "#/definitions/non-empty-string"
								},
								"timestamp": {
									"string": "string",
									"format": "date-time",
									"description": "We expect YYYY-MM-ddTHH:mm:SSZ"
								},
								"requestedScore": {
									"type": "string",
                                    "pattern": "^[0-9]+$",
                                    "minLength": 1, 
                                    "maxLength": 3
								},
								"qualityScore": {
									"type": "string",
                                    "pattern": "^[0-9]+$",
                                    "minLength": 1, 
                                    "maxLength": 3
								}
							},
							"required": [
								"digitalId",
								"deviceCode",
								"deviceServiceVersion",
								"bioType",
								"bioSubType",
								"purpose",
								"env",
								"bioValue",
								"transactionId",
								"timestamp",
								"requestedScore",
								"qualityScore"
							]
						},
						"hash": {
							"type": "string"
						},
						"error": {
							"$schema": "https://json-schema.org/draft/2019-09/schema#",
							"$id": "http://mosip-compliance-toolkit.com/schemas/ErrorInfoSchema.json",
							"type": "object",
							"title": "ErrorInfoSchema",
							"description": "ErrorInfoSchema",
							"additionalProperties": false,
							"properties": {
								"errorCode": {
									"$ref": "#/definitions/non-empty-string",
									"enum": [
										"0"
									]
								},
								"errorInfo": {
									"$ref": "#/definitions/non-empty-string",
									"enum": [
										"Success"
									]
								}
							},
							"required": [
								"errorCode",
								"errorInfo"
							],
							"definitions": {
								"non-empty-string": {
									"type": "string",
									"minLength": 1
								}
							}
						}
					},
					"required": [
						"specVersion",
						"data",
						"hash",
						"error"
					]
				}
			]
		}
	},
	"required": [
		"biometrics"
	],
	"definitions": {
		"non-empty-string": {
			"type": "string",
			"minLength": 1
		}
	}
}